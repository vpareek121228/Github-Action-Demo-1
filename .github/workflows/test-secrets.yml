name: Comprehensive Secrets Diagnostic
on:
  workflow_dispatch:

jobs:
  debug-secrets:
    runs-on: ubuntu-latest
    steps:
      - name: Verbose Secret Diagnostics
        env:
          TEST_SECRET: ${{ secrets.TEST_SECRET }}
        run: |
          echo "üîç GitHub Secrets Diagnostic Detailed Report"
          echo "----------------------------------------"
          
          # Check secret existence
          if [[ -z "$TEST_SECRET" ]]; then
            echo "‚ùå ERROR: TEST_SECRET is EMPTY or NOT SET"
            echo "Potential Issues:"
            echo "1. Secret might not be correctly configured"
            echo "2. Possible typo in secret name"
            echo "3. Repository permissions might be restricted"
            exit 1
          fi
          
          # Partial secret reveal for verification (without full exposure)
          echo "‚úÖ Secret exists"
          echo "Secret first 4 chars: ${TEST_SECRET:0:4}..."
          
          # Additional context
          echo -e "\nüìã Repository Context:"
          echo "Repository: $GITHUB_REPOSITORY"
          echo "Workflow Trigger: workflow_dispatch"
          echo "GitHub Actor: $GITHUB_ACTOR"
